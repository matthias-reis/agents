# Current Task: Fix CI Failures

- Issue: [#<%= it.issue.number %>](<%- it.issue.url %>) — <%- it.issue.title %>
- State: <%- it.issue.state %>

## Task Description

- Review the **CI Failures** below and fix all failing tests/checks
- Make necessary code changes to ensure all CI checks pass
- Commit and push fixes to the branch
- Append a line to `<%- it.paths.costs %>` with:
  - timestamp (UTC), provider, model, input_tokens, output_tokens, total_tokens, estUSD, headers snapshot (remaining/reset if available).

## Issue Summary

<% if (it.issue.bodySnippet) { %>
<%- it.issue.bodySnippet %>
<% } else { %>
_No issue body provided._
<% } %>

Labels: <%= it.labels.length ? it.labels.join(', ') : '—' %>

<% if (it.pr) { %>
## Pull Request

- PR: [#<%= it.pr.number %>](<%- it.pr.url %>)
- Branch: <%- it.pr.headRef %> → <%- it.pr.baseRef %>
- Status: <%= it.pr.isDraft ? 'Draft' : 'Ready for review' %>
- Mergeable: <%- it.pr.mergeableState || 'unknown' %>

## CI Failures

<% const ciNotes = (it.extras && it.extras.ciNotes) || []; %>
<% if (ciNotes.length) { %>
<% ciNotes.forEach(function(note) { %>
<%- note %>
<% }); %>
<% } else { %>
- _No specific CI failures captured._
<% } %>
<% } else { %>
- _No associated pull request._
<% } %>

## Recent Comments

<% if (it.comments.length) { %>
<% it.comments.forEach(function(comment) { %>
- <%- comment.updatedAt %> — [<%- comment.author %>](<%- comment.url %>): <%- comment.bodySnippet %>
<% }); %>
<% } else { %>
- _No recent comments captured._
<% } %>

### Context Links

<% const contextLinks = (it.extras && it.extras.contextLinks) || []; %>
<% if (contextLinks.length) { %>
<% contextLinks.forEach(function(link) { %>
- [<%- link %>](<%- link %>)
<% }); %>
<% } else { %>
- _No context links discovered._
<% } %>

## Workspace Paths

- Task: <%- it.paths.task %>
- Plan: <%- it.paths.plan %>
- QA: <%- it.paths.qa %>
- Costs: <%- it.paths.costs %>
- PR metadata: <%- it.paths.pr %>