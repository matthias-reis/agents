# Current Task: Address Plan Feedback

- Issue: [#<%= it.issue.number %>](<%- it.issue.url %>) — <%- it.issue.title %>
- State: <%- it.issue.state %>

## Task Description

- Review the **Recent Feedback** below from maintainers/reviewers
- Update the `<%- it.paths.plan %>` based on the feedback
- Address all concerns and incorporate suggestions
- Append a line to `<%- it.paths.costs %>` with:
  - timestamp (UTC), provider, model, input_tokens, output_tokens, total_tokens, estUSD, headers snapshot (remaining/reset if available).
- Do **not** modify other files unless specifically requested.

## Issue Summary

<% if (it.issue.bodySnippet) { %>
<%- it.issue.bodySnippet %>
<% } else { %>
_No issue body provided._
<% } %>

Labels: <%= it.labels.length ? it.labels.join(', ') : '—' %>

## Recent Feedback

<% if (it.comments.length) { %>
<% it.comments.forEach(function(comment) { %>
- <%- comment.updatedAt %> — [<%- comment.author %>](<%- comment.url %>): <%- comment.bodySnippet %>
<% }); %>
<% } else { %>
- _No new feedback captured for this state._
<% } %>

<% if (it.pr) { %>
## Pull Request

- PR: [#<%= it.pr.number %>](<%- it.pr.url %>)
- Branch: <%- it.pr.headRef %> → <%- it.pr.baseRef %>
- Status: <%= it.pr.isDraft ? 'Draft' : 'Ready for review' %>
<% } else { %>
- _No associated pull request yet._
<% } %>

### Context Links

<% const contextLinks = (it.extras && it.extras.contextLinks) || []; %>
<% if (contextLinks.length) { %>
<% contextLinks.forEach(function(link) { %>
- [<%- link %>](<%- link %>)
<% }); %>
<% } else { %>
- _No context links discovered._
<% } %>

## Workspace Paths

- Task: <%- it.paths.task %>
- Plan: <%- it.paths.plan %>
- QA: <%- it.paths.qa %>
- Costs: <%- it.paths.costs %>
- PR metadata: <%- it.paths.pr %>