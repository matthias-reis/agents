## Plan Proposed Snapshot

- Issue: [#<%= it.issue.number %>](<%- it.issue.url %>) — <%- it.issue.title %>
- State: <%- it.issue.state %>
- Labels: <%= it.labels.length ? it.labels.join(', ') : '—' %>

### Issue Summary

<% if (it.issue.bodySnippet) { %>
<%- it.issue.bodySnippet %>
<% } else { %>
_No issue body provided._
<% } %>

### Pull Request

<% if (it.pr) { %>
- PR: [#<%= it.pr.number %>](<%- it.pr.url %>)
- Draft: <%= it.pr.isDraft ? 'yes' : 'no' %>
- Branch: <%- it.pr.headRef %> → <%- it.pr.baseRef %>
- Commits: <%= typeof it.pr.commits === 'number' ? it.pr.commits : 'unknown' %>
- Mergeable: <%- it.pr.mergeableState || 'unknown' %>
<% } else { %>
- _No associated pull request._
<% } %>

### Pending Feedback

<% if (it.comments.length) { %>
<% it.comments.forEach(function(comment) { %>
- <%- comment.updatedAt %> — [<%- comment.author %>](<%- comment.url %>): <%- comment.bodySnippet %>
<% }); %>
<% } else { %>
- _No new comments since last sync._
<% } %>

### Sync Metadata

<% if (it.metadata) { %>
- Last issue sync: <%- it.metadata.lastIssueSyncAt || 'never' %>
- Last review sync: <%- it.metadata.lastReviewSyncAt || 'never' %>
- Last CI sync: <%- it.metadata.lastCiSyncAt || 'never' %>
- QA comment: <%- it.metadata.qaCommentUrl || 'not posted' %>
<% } else { %>
- _No metadata recorded._
<% } %>

### Workspace Flags

- Task file present: <%= it.flags.hasTask ? 'yes' : 'no' %>
- Plan file present: <%= it.flags.hasPlan ? 'yes' : 'no' %>
- QA notes present: <%= it.flags.hasQa ? 'yes' : 'no' %>
- PR detected: <%= it.flags.hasPr ? 'yes' : 'no' %>
- Merge conflicts: <%= it.flags.hasConflicts ? 'yes' : 'no' %>
- Dry run: <%= it.flags.dryRun ? 'yes' : 'no' %>

### Context Links

<% const contextLinks = (it.extras && it.extras.contextLinks) || []; %>
<% if (contextLinks.length) { %>
<% contextLinks.forEach(function(link) { %>
- [<%- link %>](<%- link %>)
<% }); %>
<% } else { %>
- _No context links discovered._
<% } %>
